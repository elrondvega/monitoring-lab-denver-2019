
...

# enter machine
ssh -i id_rsa ubuntu@<my_ip>
 
# enter lab env
git clone https://github.com/ifat-afek/monitoring-lab-denver-2019.git
cd monitoring-lab-denver-2019

# create Monasca high_cpu_load alarm definition (unless exists already)
monasca alarm-definition-create high_cpu_load "max(cpu.percent) > 10" --severity MEDIUM

# Add a Vitrage template for high_cpu_load alarm
cd templates
vitrage template validate --path host_high_cpu.yaml
vitrage template add --path host_high_cpu.yaml

# Create a Heat stack
. ~/monitoring-lab-denver-2019/run_stack.sh

# Edit the Vitrage template for suboptimal stack
vi suboptimal_instance.yaml
...
vitrage template validate --path suboptimal_instance.yaml
vitrage template add --path suboptimal_instance.yaml

